#:import lv kivy.uix.listview
#:import la kivy.adapters.listadapter

<ListItemButton>:
    size_hint_y: None
    size: self.width, 50
    bold: True
    background_normal: ''
    deselected_color: 0.21, 0.25, 0.29, 1
    selected_color: 0.31, 0.35, 0.39, 1
    canvas.before:
        Color:
            rgba: 0.7, 0.7, 0.7, 1
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height

<RootWidget>:
    canvas:
        Color:
            rgb: 0.16, 0.21, 0.24
        Rectangle:
            size: self.size
            pos: self.pos

    but_1: but_1
    switch_1: switch_1
    sourceView: sourceView
    img_texture: img_texture
    predView: predView
    sourceLabel: sourceLabel
    predictorLabel: predictorLabel

    GridLayout:
        cols: 2
        padding: 20
        spacing: 20
        GridLayout:
            cols: 1
            spacing: 20
            canvas:
                Color:
                    rgba: 0.21, 0.25, 0.29, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                bold: True
                size_hint_y: None
                height: self.parent.height * 0.1
                text: 'Current Spectrogram'
            Image:
                padding: 20
                id: img_texture
        GridLayout:
            cols: 2
            spacing: 20
            GridLayout:
                padding: 20
                spacing: 30
                cols: 1
                canvas:
                    Color:
                        rgba: 0.21, 0.25, 0.29, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos
                GridLayout:
                    cols: 2
                    size_hint_y: None
                    height: self.parent.height * 0.1
                    Label:
                        bold: True
                        text: 'Microphone Mode'
                    Switch:
                        id: switch_1
                        active: True
                ListView:
                    id: sourceView
                    adapter:
                        la.ListAdapter(
                        # data=['{} ({} classes)'.format(elem['displayname'], elem['classes'])  for elem in app.getPredList()],
                        # data=['{} ({} classes)'.format(elem['displayname'], elem['classes'])  for elem in root.pred_list],
                        # data=["Item #{0}".format(i) for i in xrange(5)],
                        # data=['SpeechDetector', 'DCASE Predictor', 'Applause Predictor'],
                        # data = [],
                        data = [elem['displayname'] for elem in root.source_list],
                        selection_mode='single',
                        allow_empty_selection=False,
                        cls=lv.ListItemButton)
            GridLayout:
                cols: 1
                padding: 20
                spacing: 30
                canvas:
                    Color:
                        rgba: 0.21, 0.25, 0.29, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    bold: True
                    size_hint_y: None
                    height: self.parent.height * 0.1
                    text: 'Predictors'
                ListView:
                    id: predView
                    adapter:
                        la.ListAdapter(
                        # data=['{} ({} classes)'.format(elem['displayname'], elem['classes'])  for elem in app.getPredList()],
                        data=[elem['displayname'] for elem in root.pred_list],
                        # data=["Item #{0}".format(i) for i in xrange(5)],
                        # data=['SpeechDetector', 'DCASE Predictor', 'Applause Predictor'],
                        selection_mode='single',
                        allow_empty_selection=False,
                        cls=lv.ListItemButton)
        GridLayout:
            cols: 1
            canvas:
                Color:
                    rgba: 0.21, 0.25, 0.29, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                bold: True
                text: root.class_list[0]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[0], 10
            Label:
                bold: True
                text: root.class_list[1]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[1], 10
            Label:
                bold: True
                text: root.class_list[2]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[2], 10
            Label:
                bold: True
                text: root.class_list[3]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[3], 10
            Label:
                bold: True
                text: root.class_list[4]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[4], 10
        GridLayout:
            cols: 1
            spacing: 100
            GridLayout:
                cols: 2
                spacing: 20
                GridLayout:
                    cols: 1
                    canvas:
                        Color:
                            rgba: 0.21, 0.25, 0.29, 1
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    Label:
                        id: sourceLabel
                        text: root.sourceProperty
                        bold: True
                        font_size: 20
                GridLayout:
                    cols: 1
                    canvas:
                        Color:
                            rgba: 0.21, 0.25, 0.29, 1
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    Label:
                        id: predictorLabel
                        text: root.predictorProperty
                        bold: True
                        font_size: 20
            Button:
                id: but_1
                text: 'Start'
                size_hint_y: None
                height: self.parent.height * 0.2
                font_size: 20
                bold: True
                background_normal: ''
                background_color: 0.35, 0.66, 0.41, 1
                on_press: root.start_Button_pressed(but_1.text)
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    Line:
                        width: 4
                        rectangle: self.x, self.y, self.width, self.height
