#:import lv kivy.uix.listview
#:import la kivy.adapters.listadapter

<ListItemButton>:
    size_hint_y: None
    size: self.width, 50
    bold: True
    background_normal: ''
    deselected_color: 0.21, 0.25, 0.29, 1
    selected_color: 0.31, 0.35, 0.39, 1
    canvas.before:
        Color:
            rgba: 0.7, 0.7, 0.7, 1
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height

<RootWidget>:
    canvas:
        Color:
            rgb: 0.16, 0.21, 0.24
        Rectangle:
            size: self.size
            pos: self.pos

    but_1: but_1
    but_2: but_2
    speedKnobLabel: speedKnobLabel
    img_texture: img_texture

    GridLayout:
        cols: 2
        padding: 20
        spacing: 20
        GridLayout:
            cols: 1
            spacing: 20
            canvas:
                Color:
                    rgb: 0.21, 0.25, 0.29
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                bold: True
                size_hint_y: None
                height: self.parent.height * 0.1
                text: 'Current Spectrogram'
            Image:
                padding: 20
                id: img_texture
        GridLayout:
            cols: 2
            spacing: 20
            GridLayout:
                padding: 20
                spacing: 30
                cols: 1
                canvas:
                    Color:
                        rgb: 0.21, 0.25, 0.29
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    text: 'Speed'
                    bold: True
                    size_hint_y: None
                    height: self.parent.height * 0.1
                GridLayout:
                    cols: 2
                    Knob:
                        id: knob1
                        size: 80, 80
                        min: 0
                        max: 100
                        step: 1
                        value: 0
                        knobimg_source: "viewer/images/knob.png"
                        show_label: True
                        show_marker: True
                        marker_img: "viewer/images/speed_bline.png"
                        knob_size: 0.9
                        on_value: app.speedSliderEvent(knob1.value)
                    Label:
                        bold: True
                        id: speedKnobLabel
                        text: str(int(knob1.value))
            GridLayout:
                cols: 1
                spacing: 10
                Button:
                    id: but_1
                    text: 'Start'
                    font_size: 20
                    bold: True
                    background_normal: ''
                    background_color: 0.35, 0.66, 0.41, 1
                    on_press: root.start_Button_pressed()
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
                Button:
                    id: but_2
                    text: 'Pause'
                    font_size: 20
                    bold: True
                    background_color: 0, 0, 1, 1
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        Line:
                            width: 4
                            rectangle: self.x, self.y, self.width, self.height
            BoxLayout:
                orientation: "vertical"
                padding: 10
                canvas:
                    Color:
                        rgb: 0.21, 0.25, 0.29
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    id: grid1label1
                    bold: True
                    text: 'Source'
                GridLayout:
                    cols: 2
                    ToggleButton:
                        text: 'Live'
                        bold: True
                        state: 'down'
                        group: 'sourceGroup'
                    ToggleButton:
                        text: 'File'
                        bold: True
                        group: 'sourceGroup'
                TextInput:

        GridLayout:
            cols: 1
            canvas:
                Color:
                    rgb: 0.21, 0.25, 0.29
                Rectangle:
                    size: self.size
                    pos: self.pos
            Label:
                bold: True
                text: root.class_list[0]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[0], 10
            Label:
                bold: True
                text: root.class_list[1]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[1], 10
            Label:
                bold: True
                text: root.class_list[2]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[2], 10
            Label:
                bold: True
                text: root.class_list[3]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[3], 10
            Label:
                bold: True
                text: root.class_list[4]
            Widget:
                canvas:
                    Color:
                        rgba: 0, 1, 1, .9
                    RoundedRectangle:
                        pos: self.x, self.y
                        size: root.prob_list[4], 10
        ListView:
            adapter:
                la.ListAdapter(
                data=['{} ({} classes)'.format(elem['displayname'], elem['classes'])  for elem in app.getPredList()],
                # data=["Item #{0}".format(i) for i in xrange(5)],
                # data=['SpeechDetector', 'DCASE Predictor', 'Applause Predictor'],
                selection_mode='single',
                allow_empty_selection=False,
                cls=lv.ListItemButton)